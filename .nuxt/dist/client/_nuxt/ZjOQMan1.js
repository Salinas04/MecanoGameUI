import{_ as M}from"./Br3K3lNa.js";import{u as P}from"./6njsMXsu.js";import{k as j,r as C,l as D,c as l,a as t,d as y,p as g,t as s,b as h,w as b,F as L,n as B,o as i,s as d,z as f}from"./AkD5g4Ve.js";const T={class:"max-w-3xl mx-auto"},V={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6"},z={key:0,class:"text-center py-8"},E={key:1,class:"text-center py-8"},S={class:"text-red-500"},$={key:2,class:"text-center py-8"},F={key:3},U={class:"overflow-x-auto"},W={class:"w-full"},R=["onMouseenter","onMouseleave"],Y={class:"px-4 py-3 text-gray-800 dark:text-gray-200"},q={class:"px-4 py-3"},G={class:"relative group"},H=["src","alt"],I={key:1,class:"absolute -top-1 -right-1 w-4 h-4 bg-primary-500 rounded-full border border-white dark:border-gray-800"},J={class:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10 text-center"},K={class:"font-bold text-gray-800 dark:text-white"},O={class:"text-sm text-gray-600 dark:text-gray-300"},Q={class:"flex justify-between mt-1"},X={class:"font-semibold text-primary-600"},Z={class:"flex justify-between"},tt={class:"px-4 py-3 font-medium"},et={key:0,class:"ml-2 text-xs bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 py-1 px-2 rounded-full"},rt={class:"px-4 py-3 text-right"},at={class:"px-4 py-3 text-right text-gray-800 dark:text-gray-200"},st={class:"px-4 py-3 text-right text-gray-800 dark:text-gray-200"},ot={class:"px-4 py-3 text-right text-gray-600 dark:text-gray-400 text-sm"},lt={class:"mt-6 text-center"},gt={__name:"leaderboard",setup(it){const{loading:_,error:p,getTopScores:k,getProfilePictureUrl:v}=P(),{user:c,isAuthenticated:w}=j(),u=C([]);function n(o){return!w.value||!c.value||!o.user?!1:o.user===c.value._id}function N(o){return o?new Date(o).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"N/A"}async function x(){try{const o=await k();u.value=(o||[]).map(e=>({...e,highlight:!1}))}catch(o){console.error("Error fetching scores:",o)}}return D(()=>{x()}),(o,e)=>{const m=M;return i(),l("div",T,[e[8]||(e[8]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-800 dark:text-white mb-2 relative inline-block"},[y(" Leaderboard "),t("span",{class:"absolute -top-2 -right-8 w-7 h-7 bg-yellow-500 rounded-full flex items-center justify-center text-xs text-white font-bold shadow-md animate-pulse"}," #1 ")]),t("p",{class:"text-gray-600 dark:text-gray-300"},"Top typing speeds with our community's best typists")],-1)),t("div",V,[g(_)?(i(),l("div",z,e[0]||(e[0]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600"},null,-1),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"Loading scores...",-1)]))):g(p)?(i(),l("div",E,[t("p",S,s(g(p)),1),t("button",{onClick:x,class:"mt-4 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," Try Again ")])):u.value.length===0?(i(),l("div",$,[e[2]||(e[2]=t("p",{class:"text-gray-600 dark:text-gray-400"},"No scores yet. Be the first to submit your score!",-1)),h(m,{to:"/",class:"mt-4 inline-block bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-md transition-colors"},{default:b(()=>e[1]||(e[1]=[y(" Play Now ")])),_:1,__:[1]})])):(i(),l("div",F,[t("div",U,[t("table",W,[e[6]||(e[6]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-4 py-3 text-left text-gray-700 dark:text-gray-300"},"Rank"),t("th",{class:"px-4 py-3 text-left text-gray-700 dark:text-gray-300"},"Photo"),t("th",{class:"px-4 py-3 text-left text-gray-700 dark:text-gray-300"},"Name"),t("th",{class:"px-4 py-3 text-right text-gray-700 dark:text-gray-300"},"WPM"),t("th",{class:"px-4 py-3 text-right text-gray-700 dark:text-gray-300"},"Accuracy"),t("th",{class:"px-4 py-3 text-right text-gray-700 dark:text-gray-300"},"Errors"),t("th",{class:"px-4 py-3 text-right text-gray-700 dark:text-gray-300"},"Date")])],-1)),t("tbody",null,[(i(!0),l(L,null,B(u.value,(r,a)=>(i(),l("tr",{key:a,class:d(["border-b border-gray-100 dark:border-gray-800 transition-all duration-300 cursor-pointer",{"bg-yellow-50 dark:bg-yellow-900/20 hover:bg-yellow-100 dark:hover:bg-yellow-900/30":a===0,"bg-gray-50 dark:bg-gray-700/30 hover:bg-gray-100 dark:hover:bg-gray-700/50":a===1,"bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30":a===2,"hover:bg-gray-50 dark:hover:bg-gray-750":a>2}]),onMouseenter:A=>r.highlight=!0,onMouseleave:A=>r.highlight=!1},[t("td",Y,s(a+1),1),t("td",q,[t("div",G,[t("img",{src:g(v)(r.user),alt:`${r.name}'s profile picture`,class:d(["w-10 h-10 rounded-full object-cover border-2 transition-transform duration-300 transform group-hover:scale-110",n(r)?"border-primary-500":"border-gray-200 dark:border-gray-700"])},null,10,H),a<3?(i(),l("div",{key:0,class:d(["absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-md",{"bg-yellow-500":a===0,"bg-gray-400":a===1,"bg-amber-600":a===2}])},s(a+1),3)):n(r)?(i(),l("div",I)):f("",!0),t("div",J,[t("div",K,s(r.name),1),t("div",O,[t("div",Q,[e[3]||(e[3]=t("span",null,"WPM:",-1)),t("span",X,s(r.wpm),1)]),t("div",Z,[e[4]||(e[4]=t("span",null,"Accuracy:",-1)),t("span",null,s(r.accuracy)+"%",1)])]),e[5]||(e[5]=t("div",{class:"absolute left-1/2 -bottom-1 w-2 h-2 bg-white dark:bg-gray-800 transform rotate-45 -translate-x-1/2"},null,-1))])])]),t("td",tt,[t("span",{class:d({"text-primary-600 dark:text-primary-400 font-bold":n(r),"text-gray-800 dark:text-gray-200":!n(r)})},[y(s(r.name)+" ",1),n(r)?(i(),l("span",et,"You")):f("",!0)],2)]),t("td",rt,[t("span",{class:d(["inline-block font-bold transition-all duration-300",{"text-primary-600 dark:text-primary-400 transform scale-110":r.highlight,"text-primary-600 dark:text-primary-400":!r.highlight}])},s(r.wpm),3)]),t("td",at,s(r.accuracy)+"%",1),t("td",st,s(r.errors),1),t("td",ot,s(N(r.date)),1)],42,R))),128))])])]),t("div",lt,[h(m,{to:"/",class:"bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-6 rounded-md transition-colors"},{default:b(()=>e[7]||(e[7]=[y(" Play Again ")])),_:1,__:[7]})])]))])])}}};export{gt as default};
