import{_ as V}from"./7JPf2CYG.js";import{_ as X}from"./Br3K3lNa.js";import{r as d,g as L,j as $,k as Q,l as Z,c as r,m as s,b as j,a as e,F as q,n as tt,p as i,q as U,s as W,v as et,x as H,t as l,y as rt,w as z,o as a,z as F,d as O,A as at}from"./AkD5g4Ve.js";import{u as ot}from"./6njsMXsu.js";const it=window.setInterval;function st(){const S=d(""),y=d(""),c=d(!1),T=d(!1),g=d(null),x=d(null),f=d(0),k=d(null),m=d(0),b=d(0),h=d(0),P=d(120),w=d(null),I=d(null);{const o=localStorage.getItem("bestScore");o&&(k.value=JSON.parse(o))}function M(o){S.value=o,y.value=""}function J(){y.value="",c.value=!1,T.value=!1,g.value=null,x.value=null,f.value=0,m.value=0,b.value=0,h.value=0,P.value=120,w.value&&(clearInterval(w.value),w.value=null)}function N(){!c.value&&!T.value&&(g.value=new Date,c.value=!0,w.value=it(()=>{P.value>0?P.value--:E()},1e3))}function E(){if(c.value&&(x.value=new Date,c.value=!1,T.value=!0,w.value&&(clearInterval(w.value),w.value=null),R.value>0)){const o={wpm:R.value,accuracy:G.value,errors:h.value,completedPhrases:m.value,date:new Date().toISOString()},u=R.value*(G.value/100);(!k.value||u>k.value.wpm*(k.value.accuracy/100))&&(k.value=o,localStorage.setItem("bestScore",JSON.stringify(o)))}}function D(){m.value++,b.value+=S.value.length,h.value+=f.value,f.value=0,y.value="",I.value&&typeof I.value=="function"&&I.value()}const R=L(()=>{if(!g.value||!x.value&&!c.value)return 0;const o=x.value?(x.value-g.value)/1e3/60:(new Date-g.value)/1e3/60,u=b.value/5;return Math.round(u/o)}),G=L(()=>{if(b.value===0)return 100;const o=b.value-h.value;return Math.round(o/b.value*100)}),p=L(()=>{const o=Math.floor(P.value/60),u=P.value%60;return`${o.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`}),v=L(()=>S.value.split("").map((o,u)=>u>=y.value.length?"pending":o===y.value[u]?"correct":"incorrect"));return $(y,(o,u)=>{if(o.length===1&&u.length===0&&!c.value&&N(),o.length>u.length){const C=o.length-1;C<S.value.length&&o[C]!==S.value[C]&&f.value++}o.length===S.value.length&&D()}),{phrase:S,userInput:y,isGameActive:c,isGameComplete:T,errors:f,wpm:R,accuracy:G,charStatus:v,bestScore:k,completedPhrases:m,totalErrors:h,timeRemaining:P,formattedTimeRemaining:p,setPhrase:M,resetGame:J,startTimer:N,endGame:E,completePhrase:D,onPhraseCompleted:I}}const nt={class:"max-w-3xl mx-auto"},lt={class:"text-center mb-8",initial:{opacity:0,y:-20},enter:{opacity:1,y:0,transition:{duration:500}}},dt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-md border border-gray-200 dark:border-gray-700 p-6 mb-6 relative overflow-hidden",initial:{opacity:0,scale:.9},enter:{opacity:1,scale:1,transition:{duration:500,delay:200}}},yt={class:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 mono text-lg leading-relaxed"},ct={class:"mb-6"},ut=["disabled"],gt={class:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{opacity:0,y:-20},enter:{opacity:1,y:0,transition:{duration:500,delay:200}}},pt={class:"grid grid-cols-4 gap-4 mb-6"},vt={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{opacity:0,x:-20},enter:{opacity:1,x:0,transition:{duration:500,delay:300}}},xt={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},mt={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{duration:500,delay:400}}},bt={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},ft={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{opacity:0,x:20},enter:{opacity:1,x:0,transition:{duration:500,delay:500}}},kt={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},ht={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{opacity:0,x:20},enter:{opacity:1,x:0,transition:{duration:500,delay:600}}},_t={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},wt={key:0,class:"text-center relative"},St=["triggers"],Pt={class:"text-xl font-bold text-gray-800 dark:text-white mb-4 relative",initial:{x:-20,opacity:0},enter:{x:0,opacity:1,transition:{duration:400,delay:700}}},Ct={class:"grid grid-cols-4 gap-4 relative"},At={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{scale:.8,opacity:0},enter:{scale:1,opacity:1,transition:{duration:400,delay:800}}},Tt={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},It={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{scale:.8,opacity:0},enter:{scale:1,opacity:1,transition:{duration:400,delay:900}}},Mt={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},Rt={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{scale:.8,opacity:0},enter:{scale:1,opacity:1,transition:{duration:400,delay:1e3}}},Gt={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},Nt={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{scale:.8,opacity:0},enter:{scale:1,opacity:1,transition:{duration:400,delay:1100}}},Et={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},Dt={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",initial:{opacity:0},enter:{opacity:1,transition:{duration:300}},leave:{opacity:0,transition:{duration:200}}},Bt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 max-w-md w-full p-6",initial:{scale:.9,opacity:0},enter:{scale:1,opacity:1,transition:{type:"spring",stiffness:300,damping:20}},leave:{scale:.9,opacity:0,transition:{duration:200}}},Yt={class:"text-center mb-6 relative",initial:{y:-20,opacity:0},enter:{y:0,opacity:1,transition:{duration:400,delay:100}}},jt={class:"text-gray-600 dark:text-gray-400"},zt={class:"grid grid-cols-4 gap-4 mb-6 relative"},Ot={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{scale:.8,opacity:0},enter:{scale:1,opacity:1,transition:{duration:400,delay:200}}},Kt={class:"text-3xl font-bold text-primary-600 dark:text-primary-400"},Lt={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{scale:.8,opacity:0},enter:{scale:1,opacity:1,transition:{duration:400,delay:300}}},Wt={class:"text-3xl font-bold text-primary-600 dark:text-primary-400"},Ft={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{scale:.8,opacity:0},enter:{scale:1,opacity:1,transition:{duration:400,delay:400}}},Jt={class:"text-3xl font-bold text-primary-600 dark:text-primary-400"},Ut={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl border border-gray-200 dark:border-gray-600 text-center",initial:{scale:.8,opacity:0},enter:{scale:1,opacity:1,transition:{duration:400,delay:500}}},$t={class:"text-3xl font-bold text-primary-600 dark:text-primary-400"},qt={key:0,class:"mb-6 relative",initial:{y:20,opacity:0},enter:{y:0,opacity:1,transition:{duration:400,delay:500}}},Ht={class:"flex justify-center",initial:{y:20,opacity:0},enter:{y:0,opacity:1,transition:{duration:400,delay:600}}},Vt={key:1},Xt={class:"mb-6 relative",initial:{y:20,opacity:0},enter:{y:0,opacity:1,transition:{duration:400,delay:500}}},Qt={key:0,class:"text-gray-700 dark:text-gray-300 mb-4"},Zt={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},te={class:"flex space-x-4 relative",initial:{y:20,opacity:0},enter:{y:0,opacity:1,transition:{duration:400,delay:600}}},ee=["disabled"],se={__name:"index",setup(S){const{phrase:y,userInput:c,isGameActive:T,isGameComplete:g,wpm:x,accuracy:f,charStatus:k,bestScore:m,completedPhrases:b,totalErrors:h,timeRemaining:P,formattedTimeRemaining:w,setPhrase:I,resetGame:M,onPhraseCompleted:J}=st(),{loading:N,getRandomPhrase:E,saveScore:D}=ot(),{user:R,isAuthenticated:G}=Q(),p=d(""),v=d([]);$(c,async(_,t)=>{_.length===1&&t.length===0&&!T.value&&startTimer()}),$(g,async(_,t)=>{_===!0&&!t&&(G.value?await u():p.value.trim()&&await C())});async function o(){try{g.value&&M(),y.value&&y.value.trim()!==""&&(v.value.includes(y.value)||v.value.push(y.value));const _=20;v.value.length>_&&(v.value=v.value.slice(-_));let t=await E();if(t&&t.text){let A=0;const B=15;for(;v.value.includes(t.text)&&A<B;)if(A++,t=await E(),A>=B-1){v.value=[];break}I(t.text)}}catch{}}async function u(){try{await D({name:R.value.username,wpm:x.value,accuracy:f.value,errors:h.value,completedPhrases:b.value}),M(),v.value=[],o()}catch{}}async function C(){if(!p.value.trim()){alert("Please enter your name");return}try{await D({name:p.value.trim(),wpm:x.value,accuracy:f.value,errors:h.value,completedPhrases:b.value}),M(),v.value=[],o()}catch{}}return J.value=async()=>{await o()},Z(()=>{M(),v.value=[],o()}),(_,t)=>{const A=V,B=X,n=rt("motion");return a(),r("div",nt,[s((a(),r("div",lt,t[5]||(t[5]=[e("h1",{class:"text-3xl font-bold text-gray-800 dark:text-white mb-2"},"TypingRush",-1),e("p",{class:"text-gray-600 dark:text-gray-300"},"Improve your typing speed and accuracy",-1)]))),[[n]]),s((a(),r("div",dt,[e("div",yt,[(a(!0),r(q,null,tt(i(y).split(""),(Y,K)=>(a(),r("span",{key:K,class:W({"text-green-500":i(k)[K]==="correct","text-red-500":i(k)[K]==="incorrect","text-gray-500 dark:text-gray-400":i(k)[K]==="pending"})},l(Y),3))),128))]),e("div",ct,[s(e("input",{"onUpdate:modelValue":t[0]||(t[0]=Y=>et(c)?c.value=Y:null),type:"text",disabled:i(g),class:W(["w-full p-4 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-800 dark:text-white mono focus:outline-none focus:ring-2 focus:ring-primary-500",{"opacity-50":i(g)}]),placeholder:"Start typing here...",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",onCopy:t[1]||(t[1]=U(()=>{},["prevent"])),onCut:t[2]||(t[2]=U(()=>{},["prevent"])),onPaste:t[3]||(t[3]=U(()=>{},["prevent"])),onpaste:"return false"},null,42,ut),[[H,i(c)]])]),s((a(),r("div",gt,[e("div",{class:W(["text-3xl font-bold",i(P)<30?"text-red-500":"text-primary-600 dark:text-primary-400"])},l(i(w)),3),t[6]||(t[6]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Time Remaining",-1))])),[[n]]),e("div",pt,[s((a(),r("div",vt,[e("div",xt,l(i(x)),1),t[7]||(t[7]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"WPM",-1))])),[[n]]),s((a(),r("div",mt,[e("div",bt,l(i(f))+"%",1),t[8]||(t[8]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Accuracy",-1))])),[[n]]),s((a(),r("div",ft,[e("div",kt,l(i(h)),1),t[9]||(t[9]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Errors",-1))])),[[n]]),s((a(),r("div",ht,[e("div",_t,l(i(b)),1),t[10]||(t[10]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Phrases",-1))])),[[n]])]),j(A,null,{default:z(()=>[i(g)?(a(),r("div",wt,[e("button",{onClick:o,class:"bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-8 rounded-xl transition-colors"}," Try Again ")])):F("",!0)]),_:1})])),[[n]]),j(A,null,{default:z(()=>[i(m)?s((a(),r("div",{key:0,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-md border border-gray-200 dark:border-gray-700 p-6 mb-6",initial:{opacity:0,y:40},enter:{opacity:1,y:0,transition:{duration:600,delay:600}},triggers:[i(m)]},[s((a(),r("h2",Pt,t[11]||(t[11]=[O("Your Best Score")]))),[[n]]),e("div",Ct,[s((a(),r("div",At,[e("div",Tt,l(i(m).wpm),1),t[12]||(t[12]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"WPM",-1))])),[[n]]),s((a(),r("div",It,[e("div",Mt,l(i(m).accuracy)+"%",1),t[13]||(t[13]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Accuracy",-1))])),[[n]]),s((a(),r("div",Rt,[e("div",Gt,l(i(m).errors),1),t[14]||(t[14]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Errors",-1))])),[[n]]),s((a(),r("div",Nt,[e("div",Et,l(i(m).completedPhrases||0),1),t[15]||(t[15]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Phrases",-1))])),[[n]])])],8,St)),[[n]]):F("",!0)]),_:1}),j(A,null,{default:z(()=>[i(g)?s((a(),r("div",Dt,[s((a(),r("div",Bt,[s((a(),r("div",Yt,[t[16]||(t[16]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"Your Results",-1)),e("p",jt,l(i(x)>40?"Great job!":"Keep practicing!"),1)])),[[n]]),e("div",zt,[s((a(),r("div",Ot,[e("div",Kt,l(i(x)),1),t[17]||(t[17]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"WPM",-1))])),[[n]]),s((a(),r("div",Lt,[e("div",Wt,l(i(f))+"%",1),t[18]||(t[18]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Accuracy",-1))])),[[n]]),s((a(),r("div",Ft,[e("div",Jt,l(i(h)),1),t[19]||(t[19]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Errors",-1))])),[[n]]),s((a(),r("div",Ut,[e("div",$t,l(i(b)),1),t[20]||(t[20]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Phrases",-1))])),[[n]])]),i(G)?s((a(),r("div",qt,[t[21]||(t[21]=e("p",{class:"text-gray-700 dark:text-gray-300 mb-4"}," Your score has been automatically saved to your account. ",-1)),s((a(),r("div",Ht,[e("button",{onClick:o,class:"bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-8 rounded-xl transition-colors"}," Try Again ")])),[[n]])])),[[n]]):(a(),r("div",Vt,[s((a(),r("div",Xt,[p.value.trim()?(a(),r("p",Qt,' Your score has been automatically saved as "'+l(p.value.trim())+'". ',1)):(a(),r(q,{key:1},[t[26]||(t[26]=e("label",{class:"block text-gray-700 dark:text-gray-300 mb-2"},"Save your score:",-1)),s(e("input",{"onUpdate:modelValue":t[4]||(t[4]=Y=>p.value=Y),type:"text",class:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter your name",onKeyup:at(C,["enter"])},null,544),[[H,p.value]]),e("p",Zt,[j(B,{to:"/login",class:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300"},{default:z(()=>t[22]||(t[22]=[O(" Log in ")])),_:1,__:[22]}),t[24]||(t[24]=O(" or ")),j(B,{to:"/register",class:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300"},{default:z(()=>t[23]||(t[23]=[O(" register ")])),_:1,__:[23]}),t[25]||(t[25]=O(" to track your progress and appear on the leaderboard! "))])],64))])),[[n]]),s((a(),r("div",te,[p.value.trim()?F("",!0):(a(),r("button",{key:0,onClick:C,class:"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-4 rounded-xl transition-colors",disabled:i(N)||!p.value.trim()},l(i(N)?"Saving...":"Save Score"),9,ee)),e("button",{onClick:o,class:W([p.value.trim()?"bg-primary-600 hover:bg-primary-700 text-white":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-white","flex-1 font-medium py-3 px-4 rounded-xl transition-colors"])}," Try Again ",2)])),[[n]])]))])),[[n]])])),[[n]]):F("",!0)]),_:1})])}}};export{se as default};
